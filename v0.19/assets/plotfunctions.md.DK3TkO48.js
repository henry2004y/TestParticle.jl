import{_ as s,o as t,c as a,aA as e}from"./chunks/framework.C_BvjEAf.js";const n="/TestParticle.jl/v0.19/assets/orbit_example.B3xYlbU5.png",l="/TestParticle.jl/v0.19/assets/monitor_example.L4qsFbI7.png",g=JSON.parse('{"title":"Plot Functions","description":"","frontmatter":{},"headers":[],"relativePath":"plotfunctions.md","filePath":"plotfunctions.md","lastUpdated":null}'),h={name:"plotfunctions.md"};function p(r,i,k,o,d,c){return t(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="Plot-Functions" tabindex="-1">Plot Functions <a class="header-anchor" href="#Plot-Functions" aria-label="Permalink to &quot;Plot Functions {#Plot-Functions}&quot;">​</a></h1><p>TestParticle.jl wraps types of <code>AbstractODESolution</code> from DifferentialEquations.jl. The plotting recipes for Plots.jl and Makie.jl work automatically for the particle tracing solutions.</p><p>Before using the plot recipes of <code>Testparticle.jl</code>, you need to import <code>Makie</code> package via <code>using GLMakie</code> or <code>using CairoMakie</code>, which depends on your choice for the backend. All plot recipes depend on <code>Makie.jl</code>.</p><h2 id="Convention" tabindex="-1">Convention <a class="header-anchor" href="#Convention" aria-label="Permalink to &quot;Convention {#Convention}&quot;">​</a></h2><p>By convention, we use integers to represent the 7 dimensions in the input argument <code>idxs</code> for all plotting methods:</p><table tabindex="0"><thead><tr><th style="text-align:right;">Component</th><th style="text-align:right;">Meaning</th></tr></thead><tbody><tr><td style="text-align:right;">0</td><td style="text-align:right;">time</td></tr><tr><td style="text-align:right;">1</td><td style="text-align:right;">x</td></tr><tr><td style="text-align:right;">2</td><td style="text-align:right;">y</td></tr><tr><td style="text-align:right;">3</td><td style="text-align:right;">z</td></tr><tr><td style="text-align:right;">4</td><td style="text-align:right;">vx</td></tr><tr><td style="text-align:right;">5</td><td style="text-align:right;">vy</td></tr><tr><td style="text-align:right;">6</td><td style="text-align:right;">vz</td></tr></tbody></table><h2 id="Basic-recipe" tabindex="-1">Basic recipe <a class="header-anchor" href="#Basic-recipe" aria-label="Permalink to &quot;Basic recipe {#Basic-recipe}&quot;">​</a></h2><p>The simplest usage is directly calling the <code>plot</code> or <code>lines</code> function provided by <code>Makie</code>. For example,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sol, idxs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>The keyword argument <code>idxs</code> can be used to select the variables to be plotted; if not specified, it will plot the timeseries of x, y, z, vx, vy, vz. Please refer to <a href="https://docs.sciml.ai/DiffEqDocs/stable/basics/plot/#plot_vars" target="_blank" rel="noreferrer">Choose Variables</a> for details.</p><p>If you want to plot a function of time, position or velocity, you can first define the function. For example,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Eₖ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t, vx, vy, vz) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t, mₑ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sol, idxs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Eₖ, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>will plot the kinetic energy as a function of x.</p><p>You can choose the plotting time span via the keyword argument <code>tspan</code>. For example,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sol, tspan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>The plots can be customized further:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Figure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), fontsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Axis3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(f[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Particle trajectory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xlabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ylabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zlabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sol, idxs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>Multiple particle trajectories saved as the type <code>EnsembleSolution</code> is also supported by the Makie recipe.</p><h2 id="Advanced-recipe" tabindex="-1">Advanced recipe <a class="header-anchor" href="#Advanced-recipe" aria-label="Permalink to &quot;Advanced recipe {#Advanced-recipe}&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">Note</p><p>We currently rely on the Makie recipe implemented in DiffEqBase.jl. This recipe depends on an experimental API introduced in <a href="https://blog.makie.org/blogposts/v0.20/" target="_blank" rel="noreferrer">Makie v0.20</a>, which may be unstable and contains <a href="https://github.com/MakieOrg/Makie.jl/issues/3623" target="_blank" rel="noreferrer">bugs</a>. Once it becomes more stabilized with bug fixes, we will recover the interactive widgets support, e.g. <code>orbit</code> and <code>monitor</code>.</p></div><h3 id="orbit" tabindex="-1"><code>orbit</code> <a class="header-anchor" href="#orbit" aria-label="Permalink to &quot;\`orbit\` {#orbit}&quot;">​</a></h3><p><img src="`+n+'" alt=""></p><p>The slider can control the time span, and the maximum of time span will be displayed on the right of the slider.</p><p>The <code>reset</code> button can reset the scale of lines when the axis limits change. When you drag the slider, clicking <code>reset</code> button will reset the axis limits to fit the data.</p><h3 id="monitor" tabindex="-1"><code>monitor</code> <a class="header-anchor" href="#monitor" aria-label="Permalink to &quot;`monitor` {#monitor}&quot;">​</a></h3><video width="75%" height="auto" controls loop><source src="https://raw.githubusercontent.com/TCLiuu/TestParticleResource/master/videos/monitor.mp4?raw=true" type="video/mp4"></video><p><img src="'+l+'" alt=""></p><p>After first click of the <code>run</code> button, the evolution of the orbit will be displayed from the beginning. For other times, it will start from the time set by the time slider. The functionality of <code>reset</code> button is the same as above.</p><p>The time slider controls the time span. The speed slider controls the speed of the animation.</p>',29)])])}const y=s(h,[["render",p]]);export{g as __pageData,y as default};
